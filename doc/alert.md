# 告警系统设计


## key principle

处理告警就像是灭火。当有地方着火的时候，消防站会第一时间响铃，通知消防员进行灭火，同时告知消防员具体的着火信息（着火位置、火势情况），
消防中队会根据具体情况进行战术分布（如何灭火、使用哪种器材等），同时会与交通部门进行沟通，疏散人群并进行交通管制。灭火后，会有具体的消防
社区宣传活动等来普及消防知识和灭火方法。

**告警的核心要义： 让关注监控指标的人可以第一时间收到告警，了解发生了什么，并快速解决，帮助团队达成目标。**


### 关注指标的人 

有监控组、订阅人等功能，不同的人会关注不同的监控指标。
- 对监控组、订阅人等操作需要灵活操作。

### 第一时间收到告警 

通过飞书、mobile、sms等方式告知订阅者告警信息。


### 了解发生了什么 

告警信息尽量清晰易懂，让订阅者可以马上了解出现了什么问题。（通过面板展示、对告警信息的丰富描述等手段）

- 告警信息中具体的变量显示



### 快速解决

如何提高解决问题的效率，经验是解决问题最好的手段。我们需要在告警系统上对解决办法进行沉淀。同类型的告警信息会有历史的解决办法。


- 历史告警信息的沉淀

- 不同监控指标的分析指南（指标来源是哪里，数值逻辑是什么，需要在业务方接入该指标的时候就提供丰富充足的文档资料并随着升级更新）


### 帮助团队达成目标

解决问题不是一个人的事情，而是一个团队的事情。在告警平台中我们需要对处理告警的状态进行同步。

- 对告警信息标记状态和解决人。doing/done 两种状态来标记。 

团队的事后分析与总结：

- 对告警信息的总结与处理。

- 对告警的总结与处理。可以生成周月报表，根据不同的时间维度对告警数据进行聚合总结。


## 功能模块

### 权限

统一账号接入

### 告警通知

告警认领   （告警可能会产生流转导致负责人重新指定）

告警升级

留观时长

告警收敛

告警合并(分组)

告警抑制

告警屏蔽

### 查询规则

PromQL定时查询

### 告警信息管理

（CRUD）

告警日志

告警数据分析


## Minding 

告警


1. 定期查询数据


